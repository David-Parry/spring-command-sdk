# ============================================
# Command SDK Environment Configuration
# ============================================
# Copy this file to .env and update with your actual values
# DO NOT commit .env to version control!

# ============================================
# Server Configuration
# ============================================
SERVER_PORT=8081

# ============================================
# Qodo Configuration
# ============================================
COMMAND_BASE_URL=https://api.command.qodo.ai
WS_BASE_URL=wss://api.command.qodo.ai
QODO_BLOCKED_TOOLS=
QODO_AGENT_CONFIG_FILE=file:///app/agent.yml

# MCP Request Timeout (in seconds) - Increase for long-running operations
QODO_MCP_REQUEST_TIMEOUT_SECONDS=300

# Logging Level (TRACE, DEBUG, INFO, WARN, ERROR)
LOGGING_LEVEL_AI_QODO_COMMAND_INTERNAL=INFO

# Metrics Cache Configuration
QODO_METRICS_CACHE_MAX_SIZE=5000
QODO_METRICS_CACHE_EXPIRE_MINUTES=30

# ============================================
# Authentication & Tokens
# ============================================

# WebSocket Configuration (Required for agent communication)
# Get your token from: https://command.qodo.ai/settings
WEBSOCKET_TOKEN=sk-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# GitHub API Token (for GitHub MCP server and API access)
# Create at: https://github.com/settings/tokens
# Required scopes: repo, workflow, read:org
GITHUB_API_TOKEN=ghp_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# ============================================
# Webhook Configuration
# ============================================

# Snyk Webhook Configuration
SNYK_WEBHOOK_SECRET=your-snyk-webhook-secret-here
SNYK_WEBHOOK_VALIDATION_ENABLED=false

# Jira Webhook Configuration
JIRA_WEBHOOK_SECRET=your-jira-webhook-secret-here
JIRA_WEBHOOK_VALIDATION_ENABLED=false
# Find your account ID at: https://your-site.atlassian.net/jira/people/search
JIRA_AGENT_ACCOUNT_ID=712020:xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

# ============================================
# Atlassian/Confluence Configuration
# ============================================
# Required for Jira/Confluence integration
ATLASSIAN_EMAIL=your-email@example.com
ATLASSIAN_SITE_URL=https://your-site.atlassian.net
# Create API token at: https://id.atlassian.com/manage-profile/security/api-tokens
ATLASSIAN_API_TOKEN=ATATT3xFfGF0XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# ============================================
# Git Configuration
# ============================================

# Enable/disable Git and Jira MCP servers
GIT_MCP_ENABLED=true
JIRA_MCP_ENABLED=true

# Git SSH Private Key (base64 encoded)
# To generate from existing key: cat ~/.ssh/id_rsa | base64
# To create new key: ssh-keygen -t ed25519 -C "your-email@example.com"
#base64 encoded key
# Example format (this is a dummy key, replace with your actual key):
GIT_SSH_PRIVATE_KEY=LS0tLS1CXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# ============================================
# Messaging Configuration
# ============================================
MESSAGING_PROVIDER=activemq

# Message Topics/Queues
MESSAGING_DEFAULT_QUEUE=audit
MESSAGING_EVENT_QUEUE=event
MESSAGING_RESPONSE_QUEUE=response
MESSAGING_DEAD_LETTER_QUEUE=dlq

MESSAGING_DEFAULT_TOPIC=audit
MESSAGING_EVENT_TOPIC=event
MESSAGING_RESPONSE_TOPIC=response

# ============================================
# ActiveMQ Configuration
# ============================================

# Local ActiveMQ Configuration (for development)
MESSAGING_ACTIVEMQ_BROKER_URL=tcp://localhost:61616
MESSAGING_ACTIVEMQ_USERNAME=qodo
MESSAGING_ACTIVEMQ_PASSWORD=qodo
MESSAGING_ACTIVEMQ_MAX_REDELIVERIES=3

# ActiveMQ Admin Console Credentials (for Docker container)
ACTIVEMQ_USERNAME=qodo
ACTIVEMQ_PASSWORD=qodo
ACTIVEMQ_ADMIN_LOGIN=admin
ACTIVEMQ_ADMIN_PASSWORD=admin
ACTIVEMQ_WEBADMIN_LOGIN=admin
ACTIVEMQ_WEBADMIN_PASSWORD=admin

# Alternative Local Configuration (if needed)
LOCAL_SPRING_ACTIVEMQ_BROKER_URL=tcp://localhost:61616
LOCAL_SPRING_ACTIVEMQ_USER=qodo
LOCAL_SPRING_ACTIVEMQ_PASSWORD=qodo

# AWS MQ Configuration (for production)
# Replace with your actual AWS MQ broker endpoint
AWS_SPRING_ACTIVEMQ_BROKER_URL=ssl://b-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx-1.mq.us-east-2.amazonaws.com:61617
AWS_ACTIVEMQ_USERNAME=your-aws-mq-username
AWS_ACTIVEMQ_PASSWORD=your-aws-mq-password

# ============================================
# JVM Configuration
# ============================================
# JVM Options for containerized environments
JAVA_OPTS=-XX:+UseContainerSupport -XX:MaxRAMPercentage=75.0

# ============================================
# Docker-specific Configuration
# ============================================
# These are used when running with docker-compose

# Version tag for Docker images
VERSION=latest

# ============================================
# Notes
# ============================================
# 1. Required fields for basic operation:
#    - WEBSOCKET_TOKEN (for agent communication)
#    - MESSAGING_ACTIVEMQ_* (for message queue)
#
# 2. Required for specific features:
#    - GITHUB_API_TOKEN (for GitHub integration)
#    - ATLASSIAN_* (for Jira/Confluence integration)
#    - GIT_SSH_PRIVATE_KEY (for Git operations)
#    - SNYK_WEBHOOK_SECRET (for Snyk webhooks)
#    - JIRA_WEBHOOK_SECRET (for Jira webhooks)
#
# 3. Security notes:
#    - Never commit the .env file to version control
#    - Rotate tokens and secrets regularly
#    - Use strong, unique passwords
#    - Restrict API token scopes to minimum required
#
# 4. For production:
#    - Use AWS Secrets Manager or similar for sensitive values
#    - Enable webhook signature validation (*_VALIDATION_ENABLED=true)
#    - Use SSL/TLS for ActiveMQ connections in production
#    - Consider using AWS MQ or similar managed service